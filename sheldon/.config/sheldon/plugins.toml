shell = "zsh"

[plugins.zsh-completions]
github = "zsh-users/zsh-completions"
dir = "src"
apply = ["fpath"]

# fzf-tab は compinit の後に読み込む必要がある
[plugins.compinit]
inline = """
autoload -Uz compinit
_zcompdump="${XDG_CACHE_HOME:-$HOME/.cache}/zsh/zcompdump"
[[ -d "${_zcompdump:h}" ]] || mkdir -p "${_zcompdump:h}"
compinit -d "$_zcompdump"
unset _zcompdump
"""

[plugins.fzf-tab]
github = "Aloxaf/fzf-tab"

[plugins.fzf-tab-config]
inline = """
# ファイル補完時に bat でプレビュー、ディレクトリは eza でツリー表示
zstyle ':fzf-tab:complete:*' fzf-preview \
  'bat --style=numbers --color=always --line-range=:500 $realpath 2>/dev/null || eza --color=always $realpath 2>/dev/null'
# 見た目を FZF_DEFAULT_OPTS に合わせる
zstyle ':fzf-tab:*' fzf-flags --border=rounded --height=60% --layout=reverse
"""

[plugins.zsh-autosuggestions]
github = "zsh-users/zsh-autosuggestions"

[plugins.zsh-syntax-highlighting]
github = "zsh-users/zsh-syntax-highlighting"

[plugins.zsh-history-substring-search]
github = "zsh-users/zsh-history-substring-search"
